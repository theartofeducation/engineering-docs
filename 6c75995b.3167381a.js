(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{68:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return l}));var a=t(2),r=t(6),o=(t(0),t(92)),i={id:"branching-merging",slug:"/source-control/branching-merging",title:"Branching and Merging Strategy",sidebar_label:"Branching and Merging"},c={unversionedId:"source-control/branching-merging",id:"source-control/branching-merging",isDocsHomePage:!1,title:"Branching and Merging Strategy",description:"Depending on the type of project a git repository is for, we have two primary git workflows, that make use of different base branches. This document provides an overview of those two project types, and the base branch setup and git workflow for each type.",source:"@site/docs/source-control/branching-merging.mdx",slug:"/source-control/branching-merging",permalink:"/pages/source-control/branching-merging",editUrl:"https://github.com/theartofeducation/engineering-docs/docs/source-control/branching-merging.mdx",version:"current",sidebar_label:"Branching and Merging",sidebar:"docs",previous:{title:"Internationalization (i18n)",permalink:"/pages/best-practices/internationalization"},next:{title:"Code Reviews",permalink:"/pages/source-control/code-reviews"}},s=[{value:"Library Projects",id:"library-projects",children:[{value:"<code>main</code>",id:"main",children:[]},{value:"Working Branches",id:"working-branches",children:[]}]},{value:"Deployable, API or Web Hosted Projects",id:"deployable-api-or-web-hosted-projects",children:[{value:"<code>main</code>",id:"main-1",children:[]},{value:"<code>develop</code>",id:"develop",children:[]},{value:"Working Branches",id:"working-branches-1",children:[]}]},{value:"Managing Working Branches",id:"managing-working-branches",children:[]},{value:"Branch Naming Conventions",id:"branch-naming-conventions",children:[]},{value:"Merging vs Rebasing",id:"merging-vs-rebasing",children:[]}],b={rightToc:s};function l(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Depending on the type of project a git repository is for, we have two primary git workflows, that make use of different base branches. This document provides an overview of those two project types, and the base branch setup and git workflow for each type."),Object(o.b)("h2",{id:"library-projects"},"Library Projects"),Object(o.b)("p",null,"Standalone, publishable and consumable library projects most commonly will only make use of a single primary base branch, ",Object(o.b)("inlineCode",{parentName:"p"},"main"),". For these types of projects, a ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch doesn't make sense, and unnecessarily complicates things."),Object(o.b)("h3",{id:"main"},Object(o.b)("inlineCode",{parentName:"h3"},"main")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"main")," branch in these projects is the source of truth for published library versions, and is the branch from which all working (chore/feature/defect/etc) branches should be sourced from, and should be the target of all pull requests from working branches."),Object(o.b)("h3",{id:"working-branches"},"Working Branches"),Object(o.b)("p",null,"When you wish to begin development on a new task, you would create a working branch based off of the ",Object(o.b)("inlineCode",{parentName:"p"},"main")," branch with a command similar to the following:"),Object(o.b)("div",{className:"admonition admonition-important alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Ensure that you're currently on the ",Object(o.b)("inlineCode",{parentName:"p"},"main")," branch and it is up to date when you execute this command."))),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"For the sake of example, the following commands assume that the work being done will be new feature development. See our ",Object(o.b)("a",{parentName:"p",href:"commit-format"},"Git Commit Formatting")," documentation for details about other valid types of working branches."))),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"git checkout -b feature/ch123/some-awesome-new-feature\n")),Object(o.b)("p",null,"See the ",Object(o.b)("a",{parentName:"p",href:"#branch-naming-conventions"},"Branch Naming Conventions")," and ",Object(o.b)("a",{parentName:"p",href:"#managing-working-branches"},"Managing Working Branches")," sections below for more information on branch naming and managing working branches."),Object(o.b)("h2",{id:"deployable-api-or-web-hosted-projects"},"Deployable, API or Web Hosted Projects"),Object(o.b)("p",null,"These type of projects consist of the use of two primary base branches, and working branches for chores, features, defect and other ",Object(o.b)("a",{parentName:"p",href:"commit-format"},"types of development work")," are created from those base branches."),Object(o.b)("h3",{id:"main-1"},Object(o.b)("inlineCode",{parentName:"h3"},"main")),Object(o.b)("p",null,"The primary branch that is the source of truth for releases to production in every repository is the ",Object(o.b)("inlineCode",{parentName:"p"},"main")," branch. Pull requests into the ",Object(o.b)("inlineCode",{parentName:"p"},"main")," branch should only ever come from either (most commonly) the ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch, after development work has been merged into it, or emergency defect fixes, which will be covered in more detail in a section below."),Object(o.b)("div",{className:"admonition admonition-important alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},Object(o.b)("strong",{parentName:"p"},"You should always create a merge commit when merging from ",Object(o.b)("inlineCode",{parentName:"strong"},"develop")," into ",Object(o.b)("inlineCode",{parentName:"strong"},"main"),".")),Object(o.b)("p",{parentName:"div"},"When merging pull requests from the ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch into ",Object(o.b)("inlineCode",{parentName:"p"},"main"),' on GitHub, specifically, when using the "big green button" to merge it, for these kinds of projects, for the sake of maintainable branch history in which the commit SHAs remain in sync with the ',Object(o.b)("inlineCode",{parentName:"p"},"develop"),' branch, we need to ensure that the "Merge pull request" (also labelled "Create a merge commit" in the button\'s dropdown menu) option is selected when merging.'))),Object(o.b)("h3",{id:"develop"},Object(o.b)("inlineCode",{parentName:"h3"},"develop")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch is originally sourced from the ",Object(o.b)("inlineCode",{parentName:"p"},"main")," branch, and is the branch from which all development work should be sourced. This means that all other ",Object(o.b)("a",{parentName:"p",href:"commit-format"},"types")," of development branches should be created from the ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch when work is started on them."),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch is used on acceptance servers for product acceptance."),Object(o.b)("div",{className:"admonition admonition-important alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},Object(o.b)("strong",{parentName:"p"},"You should always squash and merge when merging from working branches into ",Object(o.b)("inlineCode",{parentName:"strong"},"develop"),".")),Object(o.b)("p",{parentName:"div"},"When merging pull requests from working branches into the ",Object(o.b)("inlineCode",{parentName:"p"},"develop"),' branch on GitHub, specifically, when using the "big green button" to merge it, for these kinds of projects, for the sake of the cleanest, most clear and maintainable branch history, we need to ensure that the "Squash and merge" option is selected when merging.'))),Object(o.b)("h3",{id:"working-branches-1"},"Working Branches"),Object(o.b)("p",null,"When you wish to begin development on a new task, you would create a branch based off of the ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch with a command similar to the following:"),Object(o.b)("div",{className:"admonition admonition-important alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Ensure that you're currently on the ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," branch and it is up to date when you execute this command."))),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"For the sake of example, the following commands assume that the work being done will be new feature development. See our ",Object(o.b)("a",{parentName:"p",href:"commit-format"},"Git Commit Formatting")," documentation for details about other valid types of working branches."))),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"git checkout -b feature/ch123/some-awesome-new-feature\n")),Object(o.b)("p",null,"See the ",Object(o.b)("a",{parentName:"p",href:"#branch-naming-conventions"},"Branch Naming Conventions")," and ",Object(o.b)("a",{parentName:"p",href:"#managing-working-branches"},"Managing Working Branches")," sections below for more information on branch naming and managing working branches."),Object(o.b)("h2",{id:"managing-working-branches"},"Managing Working Branches"),Object(o.b)("p",null,"When you setup your working branch with the conventions outlined in the ",Object(o.b)("a",{parentName:"p",href:"#branch-naming-conventions"},"Branch Naming Conventions")," section below, your branch will be setup to facilitate the automated workflow between GitHub and Clubhouse. This integration supports the automatic movement of cards (in most cases) across the board as your working branch moves through the different stages of work as you progress through your task."),Object(o.b)("p",null,"After creating your new working branch, even before you've made any changes or commits to it, you can push it to GitHub with the following command:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"$ git push -u origin feature/ch123/some-awesome-new-feature\n")),Object(o.b)("p",null,"This will setup your local branch to track against the new branch created on the remote (most commonly ",Object(o.b)("inlineCode",{parentName:"p"},"origin"),' on GitHub), and will trigger our GitHub integration workflow in Clubhouse to automatically move the card associated with the branch into the appropriate column (typically when you\'re starting new work on a card, this will move it from "Ready for Development" to "In Development").'),Object(o.b)("p",null,"We encourage committing to working branches early and often, and pushing your local changes to GitHub regulary (no less than once per day typically), so that the current state of your work is available there should another team member need to either pull down or take over your work for any reason."),Object(o.b)("p",null,"When a working branch is ready for testing, make sure that it is up-to-date with the current base branch (either ",Object(o.b)("inlineCode",{parentName:"p"},"develop")," or ",Object(o.b)("inlineCode",{parentName:"p"},"main"),", depending on the project type) by performing a merge into your working branch with either the ",Object(o.b)("inlineCode",{parentName:"p"},"--fast-forward")," or ",Object(o.b)("inlineCode",{parentName:"p"},"--rebase")," flags. Open a PR into the base branch. The code will be reviewed and approved before merging. Delete all working branches after they are merged into the base branch in the repository. ",Object(o.b)("strong",{parentName:"p"},"You should always perform a squash merge when merging into the base branch from a working branch"),"."),Object(o.b)("h2",{id:"branch-naming-conventions"},"Branch Naming Conventions"),Object(o.b)("p",null,"Our branch naming convention is most commonly to use forward-slash delimited (",Object(o.b)("inlineCode",{parentName:"p"},"/"),") strings with three segments that represent the following elements that help uniquely identify the branch:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Type of work")," - This is a string that uniquely identifies the ",Object(o.b)("em",{parentName:"li"},"type of work")," that's being done in the branch. Examples of this would be things like ",Object(o.b)("inlineCode",{parentName:"li"},"feature"),", ",Object(o.b)("inlineCode",{parentName:"li"},"chore")," and ",Object(o.b)("inlineCode",{parentName:"li"},"fix"),". See our ",Object(o.b)("a",{parentName:"li",href:"commit-format"},"Git Commit Formatting")," documentation for a full list of valid options."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Card/Task ID number")," - This represents the card/task ID from our project management system that the work being done is associated with. For our sake, using Clubhouse, this would look something like ",Object(o.b)("inlineCode",{parentName:"li"},"ch12345"),"."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Description")," - This should be a terse, descriptive string that, to the most effective extent possible, represents the work that is being done in the branch. An example would be something like ",Object(o.b)("inlineCode",{parentName:"li"},"user-profile-delete-email"),".")),Object(o.b)("p",null,"When the three segments from the above are combined, this branch name would be:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"feature/ch12345/user-profile-delete-email\n")),Object(o.b)("p",null,"Including the Clubhouse card ID in the branch name ensures that the card is linked to your working branch on GitHub, and triggers the integration and automated workflow between the two. Every card in Clubhouse has a git helper which you can copy and paste to create branch names."),Object(o.b)("h2",{id:"merging-vs-rebasing"},"Merging vs Rebasing"),Object(o.b)("p",null,"Git is a powerful, sometimes seemingly almost magical tool, that takes time to understand and become proficient with. It has two primary mechanisms for how to approach keeping branches in-sync, ",Object(o.b)("strong",{parentName:"p"},"merging and rebasing"),". Understanding the differences between the two, and more specifically, when to use one or the other, can be one of the most difficult things to wrap your head around. ",Object(o.b)("a",{parentName:"p",href:"https://www.atlassian.com/git/tutorials/merging-vs-rebasing"},"Atlassian has produced a fantastic article that walks through, in great detail, the differences between these two approaches, the advantages and disadvantages of each, and when to use them and why"),". We consider it to be required reading for developers at AOEU."))}l.isMDXComponent=!0},92:function(e,n,t){"use strict";t.d(n,"a",(function(){return h})),t.d(n,"b",(function(){return p}));var a=t(0),r=t.n(a);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var b=r.a.createContext({}),l=function(e){var n=r.a.useContext(b),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},h=function(e){var n=l(e.components);return r.a.createElement(b.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},d=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),h=l(t),d=a,p=h["".concat(i,".").concat(d)]||h[d]||m[d]||o;return t?r.a.createElement(p,c(c({ref:n},b),{},{components:t})):r.a.createElement(p,c({ref:n},b))}));function p(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var b=2;b<o;b++)i[b]=t[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);